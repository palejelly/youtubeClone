(()=>{const e=document.querySelector("video"),t=document.getElementById("play"),n=t.querySelector("i"),d=document.getElementById("mute"),u=(d.querySelector("i"),document.getElementById("time"),document.getElementById("volume")),l=document.getElementById("currentTime"),r=document.getElementById("totalTime"),a=document.getElementById("timeline"),m=document.getElementById("fullScreen"),o=(m.querySelector("i"),document.getElementById("videoContainer")),i=document.getElementById("videoControls");let s=.5;e.volume=s;const c=e=>new Date(1e3*e).toISOString().substr(14,5),v=()=>{try{r.innerText=c(Math.floor(e.duration)),a.max=Math.floor(e.duration)}catch(e){r.innerText="00:00",a.max=1e7}};let E,y;t.addEventListener("click",(t=>{e.paused?e.play():e.pause(),n.className=e.paused?"fas fa-play":"fas fa-pause"})),d.addEventListener("click",(t=>{e.muted?e.muted=!1:e.muted=!0,d.innerText=e.muted?"Unmute":"Mute",u.value=e.muted?0:.5})),u.addEventListener("input",(t=>{const{target:{value:n}}=t;e.muted&&(e.muted=n,d.innerText="Mute"),s=n,e.volume=n})),e.readyState?v():e.addEventListener("loadedmetadata",v),e.addEventListener("timeupdate",(()=>{l.innerText=c(Math.floor(e.currentTime)),a.value=Math.floor(e.currentTime)})),a.addEventListener("input",(t=>{const{target:{value:n}}=t;e.currentTime=n})),m.addEventListener("click",(e=>{document.fullscreenElement?(m.innerText="Enter Full Screen",document.exitFullscreen()):(o.requestFullscreen(),m.innerText="Exit Full Screen")})),e.addEventListener("mousemove",(()=>{y&&(clearTimeout(y),y=null),i.classList.add("showing"),E||(clearTimeout(E),E=null),E=setTimeout((()=>{i.classList.remove("showing")}),3e3)})),e.addEventListener("mouseleave",(()=>{y=setTimeout((()=>{i.classList.remove("showing")}),3e3)})),e.addEventListener("ended",(()=>{const{id:e}=o.dataset;fetch(`/api/videos/${e}/view`,{method:"POST"})}))})();